<template>
  <nav class="main-menu" :class="{'active': menu_open_state}">
    <ul>
      <li @click="setMenuOpen(false)" v-if="loginState" class="d-flex d-md-none">
        <a href="#">
          <i class="fa fa-2x">
            <svg viewBox="0 0 1024 1024" width="23" height="23">
              <path fill="currentColor" d="M943.9 220l0.1 0.1v583.7l-0.1 0.1H80.2l-0.1-0.1V220.1l0.1-0.1h863.7m0.1-80H80c-44 0-80 36-80 80v584c0 44 36 80 80 80h864c44 0 80-36 80-80V220c0-44-36-80-80-80z" />
              <path fill="currentColor" d="M341.4 380c18.4 0 33.3 14.2 33.3 31.7s-14.9 31.7-33.3 31.7-33.3-14.2-33.3-31.7 15-31.7 33.3-31.7M388 614.1c22.8 0 42.7 11.7 53.8 29.2-16 0.7-34.4 0.7-53.8 0.7h-85c-19.4 0-38 0-53.8-0.6 11.1-17.5 31.1-29.3 53.8-29.3h85M341.4 300c-62.5 0-113.3 50.1-113.3 111.7s50.8 111.7 113.3 111.7 113.3-50.1 113.3-111.7C454.8 350.1 404 300 341.4 300zM388 534.1h-85c-78.9 0-143.1 63.2-143.1 140.9v8.4c0 40.5 63.2 40.5 143.1 40.5h85c76.8 0 143.1 0 143.1-40.5V675c0-77.7-64.2-140.9-143.1-140.9zM824 380H604c-22 0-40-18-40-40s18-40 40-40h220c22 0 40 18 40 40s-18 40-40 40zM824 540H659c-22 0-40-18-40-40s18-40 40-40h165c22 0 40 18 40 40s-18 40-40 40zM824 700H659c-22 0-40-18-40-40s18-40 40-40h165c22 0 40 18 40 40s-18 40-40 40z" />
            </svg>
          </i>
          <span class="nav-text">个人中心</span>
        </a>
      </li>
      <li @click="setMenuOpen(false)" v-if="loginState" class="d-flex d-md-none">
        <a href="#">
          <i class="fa fa-2x">
            <svg viewBox="0 0 1243 1024" width="23" height="23">
              <path fill="currentColor" d="M916.706448 392.49304c65.91617 0 119.500587 53.607078 119.500587 119.500587s-53.584417 119.500587-119.500587 119.500587h-20.721933a360.538405 360.538405 0 0 1-14.362731 34.894879l14.578009 14.602087c22.490896 22.513557 34.89488 52.509443 34.89488 84.510815 0 31.977295-12.403984 61.995842-34.89488 84.486738-22.489479 22.513557-52.508027 34.89488-84.485322 34.89488-31.978711 0-61.997259-12.381323-84.512231-34.89488l-14.57801-14.602086a360.265059 360.265059 0 0 1-34.918956 14.386808v20.721933c0 65.893509-53.583001 119.500587-119.500587 119.500587s-119.500587-53.607078-119.500588-119.500587v-20.721933a358.134939 358.134939 0 0 1-34.918956-14.386808l-14.602087 14.602086c-22.490896 22.513557-52.508027 34.89488-84.488154 34.89488-31.978711 0-61.995842-12.381323-84.485322-34.89488-22.490896-22.489479-34.89488-52.508027-34.89488-84.485322 0-32.002788 12.403984-61.997259 34.89488-84.512231l14.602087-14.578009a357.928159 357.928159 0 0 1-14.386809-34.918957h-20.721933c-65.91617 0-119.500587-53.607078-119.500587-119.500587s53.584417-119.500587 119.500587-119.500587h20.721933a357.98906 357.98906 0 0 1 14.386809-34.918957l-14.602087-14.57801c-22.490896-22.513557-34.89488-52.509443-34.89488-84.512231 0-31.977295 12.403984-61.995842 34.89488-84.485322 22.489479-22.513557 52.508027-34.89488 84.485322-34.89488 31.978711 0 61.997259 12.381323 84.488154 34.89488l14.602087 14.578009a363.565046 363.565046 0 0 1 34.918956-14.362731V153.491865c0-65.893509 53.583001-119.500587 119.500588-119.500587s119.500587 53.607078 119.500587 119.500587v20.721933a360.621967 360.621967 0 0 1 34.918956 14.386809l14.57801-14.602087c22.513557-22.513557 52.532104-34.89488 84.512231-34.89488 31.978711 0 61.995842 12.381323 84.485322 34.89488 22.490896 22.489479 34.89488 52.508027 34.89488 84.485322 0 32.002788-12.403984 61.997259-34.89488 84.510815l-14.578009 14.603503a359.677293 359.677293 0 0 1 14.362731 34.89488h20.721933z m-62.762062-91.752374c11.232701-11.232701 17.399285-26.218606 17.399285-42.255408s-6.166584-31.022706-17.399285-42.23133c-22.465402-22.442741-62.021336-22.442741-84.486739 0l-46.008611 46.008611-19.71919-11.0415c-19.908975-11.115148-41.44245-20.005283-64.050898-26.433884l-21.726092-6.143924V153.490449c0-32.958793-26.816286-59.749585-59.751002-59.749585-32.9333 0-59.749585 26.792209-59.749585 59.749585v65.152782l-21.726092 6.143924c-22.656603 6.452678-44.214155 15.318736-64.052315 26.433884l-19.717774 11.0415-46.008611-46.008611c-22.465402-22.442741-62.021336-22.442741-84.486738 0-11.232701 11.208624-17.397869 26.194529-17.397869 42.23133s6.165168 31.022706 17.397869 42.255408l46.008611 46.008611-11.065577 19.741851c-11.089654 19.812666-19.958545 41.346141-26.409807 64.028238l-6.142507 21.726092h-65.152783c-32.934716 0-59.749585 26.792209-59.749585 59.751001 0 32.957377 26.81487 59.749585 59.749585 59.749586H264.851459l6.142507 21.726092c6.452678 22.679264 15.320152 44.214155 26.409807 64.052314l11.064161 19.717774L262.460739 723.250836c-11.234117 11.208624-17.399285 26.218606-17.399286 42.255408 0 16.012725 6.165168 31.022706 17.399286 42.23133 22.465402 22.442741 62.021336 22.442741 84.486738 0l46.008611-46.007194 19.717774 11.0415c19.83816 11.113732 41.395712 19.97979 64.052315 26.433884l21.726092 6.142507v65.152782c0 32.958793 26.816286 59.749585 59.749585 59.749586 32.934716 0 59.751002-26.792209 59.751002-59.749586v-65.152782l21.726092-6.142507c22.609865-6.430017 44.14334-15.320152 64.050898-26.433884l19.71919-11.0415 46.008611 46.007194c22.465402 22.442741 62.01992 22.442741 84.486739 0 11.232701-11.208624 17.399285-26.218606 17.399285-42.23133 0-16.035385-6.166584-31.045367-17.399285-42.255408l-45.960457-46.008611 10.993345-19.717774c11.137809-19.957129 20.029361-41.49202 26.433884-64.052314l6.143924-21.726092h65.152782c32.9333 0 59.749585-26.792209 59.749586-59.749586 0-32.958793-26.816286-59.751002-59.749586-59.751001h-65.152782l-6.143924-21.726092c-6.404523-22.560295-15.296075-44.095186-26.433884-64.050899l-10.993345-19.71919 45.960457-46.008611zM558.204687 691.243799c-98.850886 0-179.250173-80.399287-179.250173-179.250172S459.353801 332.743454 558.204687 332.743454s179.250173 80.399287 179.250172 179.250173S657.055572 691.243799 558.204687 691.243799z m0-298.750759c-65.917586 0-119.500587 53.607078-119.500588 119.500587s53.583001 119.500587 119.500588 119.500587 119.500587-53.607078 119.500587-119.500587-53.583001-119.500587-119.500587-119.500587z" />
              <path fill="currentColor" d="M942.199907 383.99522c70.604134 0 127.998407 57.419767 127.998406 127.998407s-57.394273 127.998407-127.998406 127.998406h-22.194889a386.092765 386.092765 0 0 1-15.383886 37.376243l15.614744 15.640237c24.089902 24.113979 37.376243 56.242819 37.376243 90.52019 0 34.251878-13.286341 66.404794-37.376243 90.494696-24.088486 24.113979-56.241402 37.376243-90.49328 37.376243-34.253294 0-66.406211-13.262264-90.521607-37.376243l-15.614743-15.640236a385.85341 385.85341 0 0 1-37.401736 15.409379v22.194888c0 70.57864-57.392857 127.998407-127.998407 127.998407s-127.998407-57.419767-127.998407-127.998407v-22.194888a383.577411 383.577411 0 0 1-37.401736-15.409379l-15.640237 15.640236c-24.089902 24.113979-56.241402 37.376243-90.496113 37.376243-34.253294 0-66.404794-13.262264-90.49328-37.376243-24.089902-24.088486-37.376243-56.241402-37.376243-90.49328 0-34.278788 13.286341-66.406211 37.376243-90.521606l15.640237-15.614743a383.369214 383.369214 0 0 1-15.409379-37.401737h-22.194889c-70.604134 0-127.998407-57.419767-127.998406-127.998406s57.394273-127.998407 127.998406-127.998407h22.194889a383.287068 383.287068 0 0 1 15.409379-37.401736l-15.640237-15.614744c-24.089902-24.113979-37.376243-56.244235-37.376243-90.521606 0-34.251878 13.286341-66.404794 37.376243-90.49328 24.088486-24.113979 56.241402-37.376243 90.49328-37.376243 34.253294 0 66.406211 13.262264 90.496113 37.376243l15.640237 15.614743a389.355928 389.355928 0 0 1 37.401736-15.383886V127.998407c0-70.57864 57.392857-127.998407 127.998407-127.998407s127.998407 57.419767 127.998407 127.998407v22.194888a386.210318 386.210318 0 0 1 37.401736 15.409379l15.614743-15.640236c24.113979-24.113979 56.268312-37.376243 90.521607-37.376243 34.253294 0 66.404794 13.262264 90.49328 37.376243 24.089902 24.088486 37.376243 56.241402 37.376243 90.49328 0 34.278788-13.286341 66.406211-37.376243 90.52019l-15.614744 15.641653c5.734612 12.110809 10.905535 24.601188 15.383886 37.376243h22.194889v0.001416z m-67.224834-98.277283c12.031496-12.031496 18.637135-28.082461 18.637134-45.260803s-6.605638-33.229307-18.637134-45.233893c-24.062992-24.038915-66.431704-24.038915-90.494697 0l-49.280272 49.280271-21.12133-11.826132c-21.325278-11.905445-44.389777-21.427252-68.60573-28.313318l-23.271279-6.581561V127.99699c0-35.302775-28.72263-63.998495-63.999911-63.998495-35.275865 0-63.998495 28.697137-63.998495 63.998495v69.785511l-23.271279 6.581561c-24.268356 6.91156-47.358348 16.407873-68.607146 28.313318l-21.119914 11.826132L331.924748 195.223241c-24.062992-24.038915-66.431704-24.038915-90.494696 0-12.031496 12.006003-18.635718 28.056967-18.635719 45.233893s6.604222 33.229307 18.635719 45.260803l49.280271 49.280272-11.853042 21.145407C266.980162 377.365504 257.4796 400.430003 250.569457 424.725269l-6.578729 23.271279h-69.78551c-35.277281 0-63.998495 28.697137-63.998495 63.999911 0 35.301359 28.721214 63.998495 63.998495 63.998495h69.78551L250.569457 599.266233c6.91156 24.292433 16.40929 47.358348 28.287824 68.607146l11.851626 21.119914-49.278855 49.280272c-12.032912 12.006003-18.637135 28.082461-18.637135 45.260803 0 17.151432 6.604222 33.229307 18.637135 45.233894 24.062992 24.038915 66.431704 24.038915 90.494696 0l49.280272-49.278856 21.119914 11.826132c21.248798 11.904029 44.33879 21.400342 68.607146 28.313319l23.271279 6.578728v69.785511c0 35.302775 28.72263 63.998495 63.998495 63.998495 35.277281 0 63.999911-28.697137 63.999911-63.998495v-69.785511l23.271279-6.578728c24.217369-6.887483 47.281868-16.40929 68.60573-28.313319l21.12133-11.826132 49.280272 49.278856c24.062992 24.038915 66.430288 24.038915 90.494697 0 12.031496-12.006003 18.637135-28.082461 18.637134-45.233894 0-17.17551-6.605638-33.253384-18.637134-45.260803l-49.229285-49.280272 11.775145-21.119914c11.929522-21.376265 21.454162-44.44218 28.313318-68.607146l6.580145-23.271279h69.785511c35.274449 0 63.998495-28.697137 63.998495-63.998495 0-35.302775-28.72263-63.999911-63.998495-63.999911h-69.785511l-6.580145-23.271279c-6.860573-24.164966-16.383796-47.230881-28.313318-68.60573l-11.775145-21.12133 49.229285-49.280272zM558.204687 703.990528c-105.879999 0-191.996902-86.116903-191.996902-191.996901S452.324688 319.996725 558.204687 319.996725s191.996902 86.116903 191.996901 191.996902S664.084685 703.990528 558.204687 703.990528z m0-319.995308c-70.60555 0-127.998407 57.419767-127.998407 127.998407s57.392857 127.998407 127.998407 127.998406 127.998407-57.419767 127.998406-127.998406-57.392857-127.998407-127.998406-127.998407z" />
            </svg>
          </i>
          <span class="nav-text">设置</span>
        </a>
      </li>
      <li @click="setMenuOpen(false)" v-if="!loginState" class="login d-flex d-md-none justify-content-center align-items-center">
        <a href="#">
          登陆 / 注册
        </a>
      </li>
      <hr v-if="!loginState" class="d-block d-md-none">
      <li>
        <router-link :to="{name: 'contest'} " @click="setMenuOpen(false)">
          <i class="fa fa-2x">
            <svg viewBox="0 0 1024 1024" width="23" height="23">
              <path fill="currentColor" opacity="0.4" d="M701.952 593.92h116.224c14.848 0 27.136-12.288 27.136-27.136v-76.8c0-14.848-12.288-27.136-27.136-27.136h-116.224c-14.848 0-27.136 12.288-27.136 27.136v76.8c0 15.36 11.776 27.136 27.136 27.136zM249.856 272.384c30.208 0 54.784-24.576 54.784-54.784V54.784C304.64 24.576 280.064 0 249.856 0S194.56 24.576 194.56 54.784v162.304c0 30.72 25.088 55.296 55.296 55.296zM701.952 819.2h116.224c14.848 0 27.136-12.288 27.136-27.136v-76.8c0-14.848-12.288-27.136-27.136-27.136h-116.224c-14.848 0-27.136 12.288-27.136 27.136v76.8c0 14.848 11.776 27.136 27.136 27.136zM773.12 272.384c30.208 0 54.784-24.576 54.784-54.784V54.784C828.416 24.576 803.328 0 773.12 0s-54.784 24.576-54.784 54.784v162.304c0 30.72 24.576 55.296 54.784 55.296zM454.144 819.2h116.224c14.848 0 27.136-12.288 27.136-27.136v-76.8c0-14.848-12.288-27.136-27.136-27.136H454.144c-14.848 0-27.136 12.288-27.136 27.136v76.8c0 14.848 11.776 27.136 27.136 27.136zM454.144 593.92h116.224c14.848 0 27.136-12.288 27.136-27.136v-76.8c0-14.848-12.288-27.136-27.136-27.136H454.144c-14.848 0-27.136 12.288-27.136 27.136v76.8c0 15.36 11.776 27.136 27.136 27.136zM206.336 819.2H322.56c14.848 0 27.136-12.288 27.136-27.136v-76.8c0-14.848-12.288-27.136-27.136-27.136H206.336c-14.848 0-27.136 12.288-27.136 27.136v76.8c0 14.848 11.776 27.136 27.136 27.136zM206.336 593.92H322.56c14.848 0 27.136-12.288 27.136-27.136v-76.8c0-14.848-12.288-27.136-27.136-27.136H206.336c-14.848 0-27.136 12.288-27.136 27.136v76.8c0 15.36 11.776 27.136 27.136 27.136z"/>
              <path fill="currentColor" d="M930.816 98.816h-68.608v118.784c0 48.64-39.936 88.576-88.576 88.576s-88.576-39.936-88.576-88.576V98.816H338.432v118.784c0 48.64-39.936 88.576-88.576 88.576S161.28 266.24 161.28 217.6V98.816H93.184C41.984 98.816 0 140.8 0 192v738.304C0 982.016 41.984 1024 93.184 1024h837.12c51.2 0 93.184-41.984 93.184-93.184V192c0.512-51.2-41.472-93.184-92.672-93.184z m11.776 832c0 6.656-5.632 12.288-12.288 12.288H93.184c-6.656 0-12.288-5.632-12.288-12.288V344.576h861.696v586.24z"/>
            </svg>
          </i>
          <span class="nav-text">比赛</span>
        </router-link>
      </li>
      <li @click="setMenuOpen(false)">
        <router-link :to="{name: 'problem'}">
          <i class="fa fa-2x">
            <svg viewBox="0 0 500 500" width="23" height="24">
              <path fill="currentColor" opacity="0.4" d="M447 73.14v45.72C447 159.14 346.67 192 223 192S-1 159.14-1 118.86V73.14C-1 32.86 99.33 0 223 0s224 32.86 224 73.14z" />
              <path fill="currentColor" d="M-1 336v102.86C-1 479.14 99.33 512 223 512s224-32.86 224-73.14V336c-48.13 33.14-136.21 48.57-224 48.57S47.12 369.14-1 336zm224-111.43c-87.79 0-175.88-15.43-224-48.57v102.86C-1 319.14 99.33 352 223 352s224-32.86 224-73.14V176c-48.13 33.14-136.21 48.57-224 48.57z" />
            </svg>
          </i>
          <span class="nav-text">题库</span>
        </router-link>
      </li>
      <li @click="setMenuOpen(false)">
        <router-link :to="{name: 'status'}">
          <i class="fa fa-2x">
            <svg viewBox="0 0 1024 1024" width="23" height="23">
              <path fill="currentColor" d="M510.610286 1024c-130.706286 0-261.376-48.310857-362.203429-148.662857-197.851429-200.740571-197.851429-524.068571 0-724.809143 201.654857-200.704 526.482286-200.704 724.370286 0 201.618286 200.704 201.618286 524.068571 0 721.078857C775.716571 971.958857 641.28 1024 510.610286 1024z m-0.548572-950.857143A436.114286 436.114286 0 0 0 200.777143 200.740571c-170.130286 170.130286-170.130286 452.388571 0 622.518858 170.130286 170.130286 452.388571 170.130286 622.518857 0 170.130286-170.130286 170.130286-452.388571 0-622.518858C738.194286 115.675429 622.189714 73.142857 510.061714 73.142857zM512 256a36.571429 36.571429 0 0 1 36.571429 36.571429v292.571428a36.571429 36.571429 0 0 1-73.142858 0V292.571429a36.571429 36.571429 0 0 1 36.571429-36.571429z m171.739429 433.956571a36.571429 36.571429 0 0 1-49.956572 13.385143l-126.683428-73.142857a36.571429 36.571429 0 0 1 36.571428-63.341714l126.683429 73.142857a36.571429 36.571429 0 0 1 13.385143 49.956571z" />
            </svg>
          </i>
          <span class="nav-text">提交记录</span>
        </router-link>
      </li>
    </ul>
    <ul v-if="loginState">
      <hr>
      <li @click="setMenuOpen(false)">
        <a href="#">
          <i class="fa fa-2x">
            <svg viewBox="0 0 1024 1024" width="23" height="23">
              <path fill="currentColor" d="M772.431 140.748a64.607 64.607 0 0 0-5.019-3.201c-1.062-0.668-3.3-1.772-3.3-1.772a63.712 63.712 0 0 0-28.52-6.707c-35.346 0-64 28.654-64 64 0 25.015 15.241 46.015 35.065 57.615C801.494 313.747 864 421.572 864 544c0 194.405-157.596 352-352 352S160 738.405 160 544c0-122.428 62.505-230.253 157.342-293.316 20.492-11.767 34.953-32.636 34.953-57.615 0-35.346-28.654-64-64-64a63.717 63.717 0 0 0-28.43 6.661s-1.426 0.655-2.094 1.074a63.87 63.87 0 0 0-7.551 4.826C118.851 227.271 32 375.485 32 544c0 265.097 214.903 480 480 480s480-214.903 480-480c0-169.092-87.445-317.747-219.569-403.252z"/>
              <path fill="currentColor" opacity="0.8" d="M512 640c35.347 0 64-28.654 64-64V64c0-35.346-28.653-64-64-64-35.346 0-64 28.654-64 64v512c0 35.346 28.654 64 64 64z" />
            </svg>
          </i>
          <span class="nav-text">退出</span>
        </a>
      </li>
    </ul>
  </nav>
</template>

<!--侧边栏导航-->
<script>
    import {header_mapGetters, header_mapMutations} from "../store/headers/header_config";
    import {login_state_mapGetters} from "../store/login_state";

    export default {
        name: 'sidebar',
        data () {
            return {}
        },
        computed: {
            ...header_mapGetters,
            ...login_state_mapGetters,
        },
        methods: {
            ...header_mapMutations,
        }
    }
</script>

<!-- Add "scoped" attribute to limit CSS to this component only -->
<style>
  .fa-2x {
    font-size: 2em;
  }
  .fa {
    position: relative;
    display: table-cell;
    width: 60px;
    height: 43px;
    text-align: center;
    vertical-align: middle;
    font-size:20px;
  }
  .main-menu:hover,nav.main-menu.expanded,.main-menu.active:hover, nav.main-menu.active.expanded {
    width:250px;
    overflow-x:hidden;
    overflow-y: auto;
  }
  .main-menu {
    background:#fff;
    position:absolute;
    top:0;
    bottom:0;
    height:100%;
    z-index: 10;
    left:0;
    width:0px;
    overflow-x:hidden;
    overflow-y: auto;
    transition: all 0.4s cubic-bezier(0.23, 1, 0.32, 1.05);
    border-right: 1px solid #dadce0;
    border-top: 1px solid #dadce0;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
  }
  .main-menu>ul {
    margin:7px 0;
  }
  .main-menu li {
    position:relative;
    display:block;
    width:250px;
  }
  .main-menu li>a {
    position:relative;
    display:table;
    border-collapse:collapse;
    border-spacing:0;
    color:#8a8a8a;;
    font-family: arial;
    font-size: 14px;
    text-decoration:none;
    transition: all 0.4s cubic-bezier(0.23, 1, 0.32, 1.05);
  }
  .main-menu .nav-text {
    display:table-cell;
    vertical-align:middle;
    width:190px;
    font-size: 1.05rem;
  }

  a:hover,a:focus {
    text-decoration:none;
  }
  nav {
    user-select:none;
  }
  nav ul,nav li {
    outline:0;
    margin:0;
    padding:0;
  }
  .main-menu li:hover>a,nav.main-menu li.active>a,.dropdown-menu>li>a:hover,.dropdown-menu>li>a:focus,.dropdown-menu>.active>a,.dropdown-menu>.active>a:hover,.dropdown-menu>.active>a:focus,.no-touch .dashboard-page nav.dashboard-menu ul li:hover a,.dashboard-page nav.dashboard-menu ul li.active a {
    color:#17bf63;
    background-color: rgba(79, 192, 141, 0.2);
    text-shadow: 0px 0px 0px;
  }
  hr{
    display: block;
    unicode-bidi: isolate;
    margin-block-start: 0.5em;
    margin-block-end: 0.5em;
    margin-inline-start: auto;
    margin-inline-end: auto;
    overflow: hidden;
  }
  .main-menu.active{
    width: 250px;
  }
  @media (min-width: 768px) {
    .main-menu, .main-menu.active{
      width: 60px;
    }
  }
  li.login{
    height: 60px;
  }
  li.login a{
    display: block;
    font-size: 1.1em;
    padding: .5em .7em;
  }
</style>
